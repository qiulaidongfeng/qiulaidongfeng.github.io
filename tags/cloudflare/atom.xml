<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Cloudflare on 秋来冬风的博客</title>
    <link>https://qiulaidongfeng.github.io/tags/cloudflare/</link>
    <description>Recent content in Cloudflare on 秋来冬风的博客</description>
    <generator>Hugo</generator>
    <language>zh-CN</language>
    <lastBuildDate>Mon, 12 May 2025 11:28:49 +0800</lastBuildDate>
    <atom:link href="https://qiulaidongfeng.github.io/tags/cloudflare/atom.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>我使用Cloudflare免费计划的经验</title>
      <link>https://qiulaidongfeng.github.io/zh-cn/%E6%88%91%E4%BD%BF%E7%94%A8cloudflare%E5%85%8D%E8%B4%B9%E8%AE%A1%E5%88%92%E7%9A%84%E7%BB%8F%E9%AA%8C/</link>
      <pubDate>Mon, 12 May 2025 11:28:49 +0800</pubDate>
      <guid>https://qiulaidongfeng.github.io/zh-cn/%E6%88%91%E4%BD%BF%E7%94%A8cloudflare%E5%85%8D%E8%B4%B9%E8%AE%A1%E5%88%92%E7%9A%84%E7%BB%8F%E9%AA%8C/</guid>
      <description>&lt;h2 id=&#34;cloudflare简介&#34;&gt;Cloudflare简介&lt;/h2&gt;&#xA;&lt;p&gt;Cloudflare是一家2009年成立于美国的企业，初衷是保护网络安全，目前在 330 多个城市拥有数据中心，与大约 95% 的全球互联网用户距离仅约 50 毫秒，凭借 388 Tbps 的网络容量，成功缓解了一些有史以来最大规模的 DDoS 攻击。&lt;/p&gt;&#xA;&lt;p&gt;根据官网：&#xA;Cloudflare的使命是帮助构建更好的互联网。我们认为每个网站和应用都应当可以免费获取基础的安全与性能服务。&lt;/p&gt;&#xA;&lt;p&gt;Cloudflare保护网站时的工作原理如图：&#xA;&lt;img src=&#34;https://qiulaidongfeng.github.io/images/cloudflare.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;用户的请求先发到Cloudflare在来到网站自己的服务器，记住这一点，这在后面很重要。&lt;/p&gt;&#xA;&lt;h2 id=&#34;为什么选择cloudflare&#34;&gt;为什么选择Cloudflare&lt;/h2&gt;&#xA;&lt;p&gt;Cloudflare定价里有四种计划，其中免费计划虽然不要钱，但也有这些很值得的，对学习建网站很有用的：&lt;/p&gt;&#xA;&lt;h3 id=&#34;安全&#34;&gt;安全&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;不修改服务器支持后量子密钥封装&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;因为量子计算机擅长破解当今普遍使用的RSA(利用大整数因式分解的数学难题)等现有密钥封装使用的公钥算法，导致传统公钥加密体系彻底失效，导致现在的tls在未来不安全。&lt;/strong&gt; 研究应对这种情况的称为后量子密码学（PQC）。&lt;/p&gt;&#xA;&lt;p&gt;尽管目前的量子计算机还未发展到这个程度，但业内预测离这个时候可能只有十到二十年，迁移目前使用的算法到能抵抗量子计算机的算法是一个长期工作，参考tls1.2迁移到tls1.3，从相关标准RFC 8446在2018年8月发布到现在已经过去了快7年，但完全替代tls1.2仍需数年。&lt;/p&gt;&#xA;&lt;p&gt;2024年8月13日，美国国家标准与技术研究所（NIST）正式发布了后量子密码学的三项新标准，其中的FIPS 203 Module-Lattice-Based Key-Encapsulation Mechanism Standar(基于模块格的密钥封装机制标准)，&lt;strong&gt;简称ML-KEM，利用数学难题Module Learning With Errors（模格上带错误学习问题）&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://qiulaidongfeng.github.io/images/MLWE.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;&#xA;&lt;p&gt;可以替代RSA等旧的算法，X25519MLKEM768是目前将其应用在tls的混合密钥交换算法，go语言已经在2025年2月发布的go1.24标准库中实现了，并默认在tls连接启用，所以这项功能对我不太有用，不过对使用其他编程语言的人可能是有用的。&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;免费不限量的DDoS防护&lt;/p&gt;&#xA;&lt;p&gt;DDoS攻击通过大量非法请求占用目标系统的资源（如带宽、内存、CPU 等），导致目标无法正常为合法用户提供服务。&lt;/p&gt;&#xA;&lt;p&gt;目前的DDoS防护市场常见的一些产品，高防IP价格根据防护的峰值攻击速率，在数万至上百万一年。高防服务器的最低价格稍低，有些一年几千块的。&lt;/p&gt;&#xA;&lt;p&gt;根据Cloudflare的博客，&#xA;&lt;strong&gt;Cloudflare曾在2022年6月为一个使用免费计划的客户网站自动缓解了当时有史以来最大规模的 HTTPS DDoS 攻击（在不到 30 秒内，产生了超过 2.12 亿次 HTTPS 攻击请求）。&lt;/strong&gt;&#xA;&lt;strong&gt;无论您使用何种Cloudflare计划(免费、专业、商业或企业),我们都不会让您离开，也不会让您因为攻击的规模而需要向我们支付更多费用。&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;p&gt;根据我的实测，确实是有防护的效果，值得使用。&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;访问速率控制&lt;/p&gt;&#xA;&lt;p&gt;对于HTTPS Flood攻击，它是一种DDoS攻击，通过发送大量的HTTPS请求达到攻击目的，处理HTTPS请求需要更多的服务器资源用于加解密。&lt;/p&gt;&#xA;&lt;p&gt;虽然这不用访问速率控制也能被上述免费DDoS防护缓解，但设置访问速率控制是个更有效的做法，&lt;strong&gt;因为检测出是此类攻击到做出反应需要时间和有未检测出的可能，但访问速率控制不会&lt;/strong&gt;。&lt;/p&gt;&#xA;&lt;p&gt;更重要的是，这节省了服务器资源，因为服务器不用自行消耗资源实现此类功能。&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;恶意流量过滤&lt;/p&gt;&#xA;&lt;p&gt;Cloudflare提供了Under Attack 模式用来在遭遇DDoS攻击时，让所有访问先进行一个大约5秒的验证，但也可以始终开启，&lt;strong&gt;这将拦截从自动化脚本或恶意机器人来的恶意流量，确保是为真实用户提供服务。&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;免费获取IP属地&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;在用户进行登录等操作时，验证IP属地是否在两次登录时一致是一种很有用的账号防盗检测手段。&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;p&gt;目前要获取IP数据，这方面的数据库由商业的获取的信息多，但比较贵，也有免费的，但信息较少。&lt;/p&gt;&#xA;&lt;p&gt;使用Cloudflare可免费获得用户IP属地信息，包括国家或地区，省份或行政区名，城市和经纬度，足够进行账号防盗检测。&lt;/p&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;性能&#34;&gt;性能&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;支持http3但不修改服务器&lt;/p&gt;&#xA;&lt;p&gt;http3是http协议的最新版本，传输层改用QUIC（快速UDP网络连接）协议，因为内置tls1.3握手数据一起发送，&lt;strong&gt;首次连接仅需1个RTT&lt;/strong&gt;（RTT是往返时间，指数据发过去再发回来的用时），比http2首次连接需要2-3个RTT更少，同时因为不使用TCP协议，避免了队头阻塞（&lt;strong&gt;前面的数据包丢了要等重新传好再发后面的数据包&lt;/strong&gt;），改善了网络差时的传输延迟等，因为对既往问题的改进，加快了网页加载速度。&lt;/p&gt;&#xA;&lt;p&gt;因为主流编程语言的标准库中并没有提供对QUIC和http3的支持，例如go语言写的程序目前要支持http3,需使用开源库 github.com/quic-go/quic-go/http3 , 它的API用法高度兼容标准库，&lt;strong&gt;改一个函数调用即可支持http3&lt;/strong&gt;，同时能在客户端不支持http3时自动回退到http2，尽管这种办法有各种优点，但使用Cloudflare，&lt;strong&gt;一行代码都不用改即可支持http3&lt;/strong&gt;。&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
